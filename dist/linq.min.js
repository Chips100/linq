function Enumerable(){}function ConcatEnumerable(a,b){LinqAssert.requiredEnumerable(a,"first"),LinqAssert.requiredEnumerable(b,"second"),this._first=a,this._second=b}function ConcatEnumerator(a,b){this._firstEnumerator=a.getEnumerator(),this._secondEnumerator=b.getEnumerator(),this.reset()}function DefaultIfEmptyEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),this._source=a,this._defaultValue=b}function DefaultIfEmptyEnumerator(a,b){this._enumerator=a.getEnumerator(),this._defaultValue=b}function DistinctEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),this._source=a,this._comparer=LinqUtils.createEqualityComparer(b)}function DistinctEnumerator(a,b){this._enumerator=a.getEnumerator(),this._comparer=b,this.reset()}function ExceptEnumerable(a,b,c){LinqAssert.requiredEnumerable(a,"first"),LinqAssert.requiredEnumerable(b,"second"),this._first=a,this._second=b,this._comparer=LinqUtils.createEqualityComparer(c)}function ExceptEnumerator(a,b,c){this._firstEnumerator=a.getEnumerator(),this._secondEnumerator=b.getEnumerator(),this._comparer=c,this.reset()}function IntersectEnumerable(a,b,c){LinqAssert.requiredEnumerable(a,"first"),LinqAssert.requiredEnumerable(b,"second"),this._first=a,this._second=b,this._comparer=LinqUtils.createEqualityComparer(c)}function IntersectEnumerator(a,b,c){this._firstEnumerator=a.getEnumerator(),this._secondEnumerator=b.getEnumerator(),this._comparer=c,this.reset()}function JoinEnumerable(a,b,c,d,e,f){LinqAssert.requiredEnumerable(a,"outer"),LinqAssert.requiredEnumerable(b,"inner"),LinqAssert.requiredFunction(c,"outerKeySelector"),LinqAssert.requiredFunction(d,"innerKeySelector"),LinqAssert.requiredFunction(e,"resultSelector"),this._outer=a,this._inner=b,this._outerKeySelector=c,this._innerKeySelector=d,this._resultSelector=e,this._keyEqualityComparer=LinqUtils.createEqualityComparer(f)}function JoinEnumerator(a,b,c,d,e,f){this._outerEnumerator=a.getEnumerator(),this._innerEnumerable=b,this._outerKeySelector=c,this._innerKeySelector=d,this._resultSelector=e,this._keyEqualityComparer=f,this.reset()}function RangeEnumerable(a,b){LinqAssert.requiredNumber(a,"start"),LinqAssert.requiredPositiveNumber(b,"count"),this._start=+a,this._count=+b}function RangeEnumerator(a,b){this._start=a,this._end=a+b,this.reset()}function RepeatEnumerable(a,b){LinqAssert.requiredPositiveNumber(b,"count"),this._element=a,this._count=b}function RepeatEnumerator(a,b){this._element=a,this._count=b,this.reset()}function SelectEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredFunction(b,"selector"),this._source=a,this._selector=b}function SelectEnumerator(a,b){this._enumerator=a.getEnumerator(),this._selector=b,this.reset()}function SelectManyEnumerable(a,b,c){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredFunction(b,"collectionSelector"),this._source=a,this._collectionSelector=b,this._resultSelector=c}function SelectManyEnumerator(a,b,c){this._enumerator=a.getEnumerator(),this._collectionSelector=b,this._resultSelector=c,this.reset()}function SkipEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredNumber(b,"count"),this._source=a,this._count=b}function SkipEnumerator(a,b){this._enumerator=a.getEnumerator(),this._number=b,this.reset()}function SkipWhileEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredFunction(b,"predicate"),this._source=a,this._predicate=b}function SkipWhileEnumerator(a,b){this._enumerator=a.getEnumerator(),this._predicate=b,this.reset()}function TakeEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredNumber(b,"count"),this._source=a,this._count=b}function TakeEnumerator(a,b){this._enumerator=a.getEnumerator(),this._number=b,this.reset()}function TakeWhileEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredFunction(b,"predicate"),this._source=a,this._predicate=b}function TakeWhileEnumerator(a,b){this._enumerator=a.getEnumerator(),this._predicate=b,this.reset()}function UnionEnumerable(a,b,c){LinqAssert.requiredEnumerable(a,"first"),LinqAssert.requiredEnumerable(b,"second"),this._first=a,this._second=b,this._comparer=c}function UnionEnumerator(a,b,c){this._firstEnumerator=a.getEnumerator(),this._secondEnumerator=b.getEnumerator(),this._comparer=c,this.reset()}function WhereEnumerable(a,b){LinqAssert.requiredEnumerable(a,"source"),LinqAssert.requiredFunction(b,"predicate"),this._source=a,this._predicate=b}function WhereEnumerator(a,b){this._enumerator=a.getEnumerator(),this._predicate=b,this.reset()}function List(a){a?LinqUtils.isArray(a)?this._array=a.slice(0):LinqUtils.isEnumerable(a)?this._array=a.toArray():LinqAssert.throwArgumentError("array"):this._array=[]}function ListEnumerator(a){this._array=a||[],this.reset()}function Grouping(a){this._elements=new List,this._elements.key=a}function Lookup(a,b,c,d){LinqAssert.requiredFunction(b,"keySelector");var e=LinqUtils.createEnumerable(a,"source");this._keyEqualityComparer=LinqUtils.createEqualityComparer(d),this._lookupByHashcodes={},this._keys=[],this._setup(e,b,LinqUtils.createSelectorFunction(c))}Enumerable.prototype.aggregate=function(a,b,c){var d,e,f=this.getEnumerator();for(LinqUtils.isFunction(a)&&(LinqUtils.isFunction(b)&&(c=b),b=a,f.moveNext(),a=f.getCurrent()),e=a;f.moveNext();)d=f.getCurrent(),e=b.call(d,e,d);return LinqUtils.isFunction(c)&&(e=c.call(e,e)),e},Enumerable.prototype.all=function(a){LinqAssert.requiredFunction(a,"predicate");for(var b,c=this.getEnumerator();c.moveNext();)if(b=c.getCurrent(),!a.call(b,b))return!1;return!0},Enumerable.prototype.any=function(a){var b,c=this.getEnumerator();if(LinqUtils.isFunction(a)){for(;c.moveNext();)if(b=c.getCurrent(),a.call(b,b))return!0;return!1}return c.moveNext()},Enumerable.prototype.contains=function(a,b){b=LinqUtils.createEqualityComparer(b);for(var c,d=this.getEnumerator();d.moveNext();)if(c=d.getCurrent(),b.equals(c,a))return!0;return!1},Enumerable.prototype.count=function(a){for(var b,c=0,d=this.getEnumerator();d.moveNext();)b=d.getCurrent(),LinqUtils.isFunction(a)&&!a.call(b,b)||c++;return c},Enumerable.prototype.elementAt=function(a){LinqAssert.requiredPositiveNumber(a,"index");for(var b=this.getEnumerator(),c=0;c<=a;)b.moveNext()||LinqAssert.throwArgumentOutOfRangeError("index"),c++;return b.getCurrent()},Enumerable.prototype.first=function(a){for(var b,c=this.getEnumerator();c.moveNext();)if(b=c.getCurrent(),!LinqUtils.isFunction(a)||a.call(b,b))return b;LinqAssert.throwNoMatchingItemError()},Enumerable.prototype.firstOrDefault=function(a){for(var b,c=this.getEnumerator();c.moveNext();)if(b=c.getCurrent(),!LinqUtils.isFunction(a)||a.call(b,b))return b;return null},Enumerable.prototype.last=function(a){for(var b,c,d=this.getEnumerator(),e=!1;d.moveNext();)b=d.getCurrent(),LinqUtils.isFunction(a)&&!a.call(b,b)||(e=!0,c=b);return e?c:void LinqAssert.throwNoMatchingItemError()},Enumerable.prototype.lastOrDefault=function(a){for(var b,c,d=this.getEnumerator(),e=!1;d.moveNext();)b=d.getCurrent(),LinqUtils.isFunction(a)&&!a.call(b,b)||(e=!0,c=b);return e?c:null},Enumerable.prototype.single=function(a){for(var b,c,d=this.getEnumerator(),e=!1;d.moveNext();)b=d.getCurrent(),LinqUtils.isFunction(a)&&!a.call(b,b)||(e?LinqAssert.throwMultipleMatchingItemsError():(e=!0,c=b));return e?c:void LinqAssert.throwNoMatchingItemError()},Enumerable.prototype.singleOrDefault=function(a){for(var b,c,d=this.getEnumerator(),e=!1;d.moveNext();)b=d.getCurrent(),LinqUtils.isFunction(a)&&!a.call(b,b)||(e?LinqAssert.throwMultipleMatchingItemsError():(e=!0,c=b));return e?c:null},Enumerable.prototype.toArray=function(){for(var a=[],b=this.getEnumerator();b.moveNext();)a.push(b.getCurrent());return a},Enumerable.prototype.toLookup=function(a,b,c){return new Lookup(this,a,b,c)},Enumerable.prototype.getEnumerator=function(){throw new Error("Not implemented: Enumerable does not support getEnumerator.")},Enumerable.prototype.toList=function(){return new List(this)},Enumerable.prototype.concat=function(a){return new ConcatEnumerable(this,a)},ConcatEnumerable.prototype=Object.create(Enumerable.prototype),ConcatEnumerable.prototype.getEnumerator=function(){return new ConcatEnumerator(this._first,this._second)},ConcatEnumerator.prototype.getCurrent=function(){return this._isFirstActive?this._firstEnumerator.getCurrent():this._secondEnumerator.getCurrent()},ConcatEnumerator.prototype.moveNext=function(){return this._isFirstActive?!!this._firstEnumerator.moveNext()||(this._isFirstActive=!1,this.moveNext()):this._secondEnumerator.moveNext()},ConcatEnumerator.prototype.reset=function(){this._secondEnumerator.reset(),this._firstEnumerator.reset(),this._isFirstActive=!0},Enumerable.prototype.defaultIfEmpty=function(a){return new DefaultIfEmptyEnumerable(this,a)},DefaultIfEmptyEnumerable.prototype=Object.create(Enumerable.prototype),DefaultIfEmptyEnumerable.prototype.getEnumerator=function(){return new DefaultIfEmptyEnumerator(this._source,this._defaultValue)},DefaultIfEmptyEnumerator.prototype.getCurrent=function(){return this._useSource?this._enumerator.getCurrent():this._defaultValue},DefaultIfEmptyEnumerator.prototype.moveNext=function(){return this._useSource||this._useDefault?this._useSource?this._enumerator.moveNext():!this._useDefault&&void 0:(this._useSource=this._enumerator.moveNext(),this._useDefault=!this._useSource,!0)},DefaultIfEmptyEnumerator.prototype.reset=function(){this._useSource=!1,this._useDefault=!1,this._enumerator.reset()},Enumerable.prototype.distinct=function(a){return new DistinctEnumerable(this,a)},DistinctEnumerable.prototype=Object.create(Enumerable.prototype),DistinctEnumerable.prototype.getEnumerator=function(){return new DistinctEnumerator(this._source,this._comparer)},DistinctEnumerator.prototype.getCurrent=function(){return this._enumerator.getCurrent()},DistinctEnumerator.prototype.moveNext=function(){var a,b;if(this._enumerator.moveNext()){if(a=this._enumerator.getCurrent(),b=this._comparer.getHashCode(a),this._seenElements[b]){for(var c=this._seenElements[b].length-1;c>=0;c--)if(this._comparer.equals(a,this._seenElements[b][c]))return this.moveNext();return this._seenElements[b].push(a),!0}return this._seenElements[b]=[a],!0}return!1},DistinctEnumerator.prototype.reset=function(){this._seenElements={},this._enumerator.reset()},Enumerable.empty=function(){function a(){}function b(){}return Enumerable.empty._singleTon||(a.prototype=Object.create(Enumerable.prototype),a.prototype.getEnumerator=function(){return new b},b.prototype.getCurrent=function(){},b.prototype.reset=function(){},b.prototype.moveNext=function(){return!1},Enumerable.empty._singleTon=new a),Enumerable.empty._singleTon},Enumerable.prototype.except=function(a,b){return new ExceptEnumerable(this,a,b)},ExceptEnumerable.prototype=Object.create(Enumerable),ExceptEnumerable.prototype.getEnumerator=function(){return new ExceptEnumerator(this._first,this._second,this._comparer)},ExceptEnumerator.prototype.getCurrent=function(){return this._firstEnumerator.getCurrent()},ExceptEnumerator.prototype.moveNext=function(){var a,b;if(!this._hasScannedSecond){for(;this._secondEnumerator.moveNext();)a=this._secondEnumerator.getCurrent(),b=this._comparer.getHashCode(a),this._bannedElements[b]?this._bannedElements[b].push(a):this._bannedElements[b]=[a];this._hasScannedSecond=!0}if(this._firstEnumerator.moveNext()){if(a=this._firstEnumerator.getCurrent(),b=this._comparer.getHashCode(a),this._bannedElements[b]){for(var c=this._bannedElements[b].length-1;c>=0;c--)if(this._comparer.equals(a,this._bannedElements[b][c]))return this.moveNext();return this._bannedElements[b].push(a),!0}return this._bannedElements[b]=[a],!0}return!1},ExceptEnumerator.prototype.reset=function(){this._firstEnumerator.reset(),this._secondEnumerator.reset(),this._hasScannedSecond=!1,this._bannedElements={}},Enumerable.prototype.intersect=function(a,b){return new IntersectEnumerable(this,a,b)},IntersectEnumerable.prototype=Object.create(Enumerable.prototype),IntersectEnumerable.prototype.getEnumerator=function(){return new IntersectEnumerator(this._first,this._second,this._comparer)},IntersectEnumerator.prototype.getCurrent=function(){return this._firstEnumerator.getCurrent()},IntersectEnumerator.prototype.moveNext=function(){var a,b;if(!this._hasScannedSecond){for(;this._secondEnumerator.moveNext();)a=this._secondEnumerator.getCurrent(),b=this._comparer.getHashCode(a),this._seenElements[b]?this._seenElements[b].push(a):this._seenElements[b]=[a];this._hasScannedSecond=!0}if(this._firstEnumerator.moveNext()){if(a=this._firstEnumerator.getCurrent(),b=this._comparer.getHashCode(a),this._seenElements[b]){for(var c=this._seenElements[b].length-1;c>=0;c--)if(this._comparer.equals(a,this._seenElements[b][c])){if(this._yieldedElements[b]){for(c=this._yieldedElements[b].length-1;c>=0;c--)if(this._comparer.equals(a,this._yieldedElements[b][c]))return this.moveNext();return this._yieldedElements[b].push(a),!0}return this._yieldedElements[b]=[a],!0}return this.moveNext()}return this.moveNext()}return!1},IntersectEnumerator.prototype.reset=function(){this._firstEnumerator.reset(),this._secondEnumerator.reset(),this._hasScannedSecond=!1,this._seenElements={},this._yieldedElements={}},Enumerable.prototype.join=function(a,b,c,d,e){return new JoinEnumerable(this,a,b,c,d,e)},JoinEnumerable.prototype=Object.create(Enumerable.prototype),JoinEnumerable.prototype.getEnumerator=function(){return new JoinEnumerator(this._outer,this._inner,this._outerKeySelector,this._innerKeySelector,this._resultSelector,this._keyEqualityComparer)},JoinEnumerator.prototype.getCurrent=function(){return this._resultSelector(this._currentOuter,this._currentInnerEnumerator.getCurrent())},JoinEnumerator.prototype.moveNext=function(){return this._hasScannedInner||(this._hasScannedInner=!0,this._innerLookup=this._innerEnumerable.toLookup(this._innerKeySelector,void 0,this._keyEqualityComparer)),!(!this._currentInnerEnumerator||!this._currentInnerEnumerator.moveNext())||!!this._outerEnumerator.moveNext()&&(this._currentOuter=this._outerEnumerator.getCurrent(),this._currentInnerEnumerator=this._innerLookup.get(this._outerKeySelector(this._currentOuter)).getEnumerator(),this.moveNext())},JoinEnumerator.prototype.reset=function(){this._outerEnumerator.reset(),this._hasScannedInner=!1,this._currentInnerEnumerator=void 0,this._currentOuter=void 0},Enumerable.range=function(a,b){return new RangeEnumerable(a,b)},RangeEnumerable.prototype=Object.create(Enumerable.prototype),RangeEnumerable.prototype.getEnumerator=function(){return new RangeEnumerator(this._start,this._count)},RangeEnumerator.prototype.getCurrent=function(){if(this._index<=this._start||this._index>this._end)throw new Error("invalid cursor position");return this._index-1},RangeEnumerator.prototype.moveNext=function(){return this._index++<this._end},RangeEnumerator.prototype.reset=function(){this._index=this._start},Enumerable.repeat=function(a,b){return new RepeatEnumerable(a,b)},RepeatEnumerable.prototype=Object.create(Enumerable.prototype),RepeatEnumerable.prototype.getEnumerator=function(){return new RepeatEnumerator(this._element,this._count)},RepeatEnumerator.prototype.getCurrent=function(){if(this._index>=0&&this._index<this._count)return this._element;throw new Error("Tried to call getCurrent() on invalid cursor position.")},RepeatEnumerator.prototype.moveNext=function(){return++this._index<this._count},RepeatEnumerator.prototype.reset=function(){this._index=-1},Enumerable.prototype.select=function(a){return new SelectEnumerable(this,a)},SelectEnumerable.prototype=Object.create(Enumerable.prototype),SelectEnumerable.prototype.getEnumerator=function(){return new SelectEnumerator(this._source,this._selector)},SelectEnumerator.prototype.getCurrent=function(){var a=this._enumerator.getCurrent();return this._selector.call(a,a,this._index)},SelectEnumerator.prototype.moveNext=function(){return this._index++,this._enumerator.moveNext()},SelectEnumerator.prototype.reset=function(){this._enumerator.reset(),this._index=-1},Enumerable.prototype.selectMany=function(a,b){return new SelectManyEnumerable(this,a,b)},SelectManyEnumerable.prototype=Object.create(Enumerable.prototype),SelectManyEnumerable.prototype.getEnumerator=function(){return new SelectManyEnumerator(this._source,this._collectionSelector,this._resultSelector)},SelectManyEnumerator.prototype.getCurrent=function(){var a=this._currentEnumerator.getCurrent();return LinqUtils.isFunction(this._resultSelector)?this._resultSelector.call(this._currentElement,this._currentElement,a):a},SelectManyEnumerator.prototype.moveNext=function(){var a;return!(!this._currentEnumerator||!this._currentEnumerator.moveNext())||(this._index++,!!this._enumerator.moveNext()&&(this._currentElement=this._enumerator.getCurrent(),a=this._collectionSelector.call(this._currentElement,this._currentElement,this._index),a instanceof Enumerable||(a=new List(a)),this._currentEnumerator=a.getEnumerator(),!!this._currentEnumerator.moveNext()||this.moveNext()))},SelectManyEnumerator.prototype.reset=function(){this._enumerator.reset(),this._index=-1,this._currentElement=void 0,this._currentEnumerator=void 0},Enumerable.prototype.skip=function(a){return new SkipEnumerable(this,a)},SkipEnumerable.prototype=Object.create(Enumerable.prototype),SkipEnumerable.prototype.getEnumerator=function(){return new SkipEnumerator(this._source,this._count)},SkipEnumerator.prototype.getCurrent=function(){return this._enumerator.getCurrent()},SkipEnumerator.prototype.moveNext=function(){if(!this._hasSkippedFirstElements){this._hasSkippedFirstElements=!0;for(var a=this._number;a>0;a--)this._enumerator.moveNext()}return this._enumerator.moveNext()},SkipEnumerator.prototype.reset=function(){this._enumerator.reset(),this._hasSkippedFirstElements=!1},Enumerable.prototype.skipWhile=function(a){return new SkipWhileEnumerable(this,a)},SkipWhileEnumerable.prototype=Object.create(Enumerable.prototype),SkipWhileEnumerable.prototype.getEnumerator=function(){return new SkipWhileEnumerator(this._source,this._predicate)},SkipWhileEnumerator.prototype.getCurrent=function(){return this._enumerator.getCurrent()},SkipWhileEnumerator.prototype.moveNext=function(){var a;if(this._hasSkippedFirstElements)return this._enumerator.moveNext();for(this._hasSkippedFirstElements=!0;this._enumerator.moveNext();)if(this._index++,a=this._enumerator.getCurrent(),!this._predicate.call(a,a,this._index))return!0;return!1},SkipWhileEnumerator.prototype.reset=function(){this._enumerator.reset(),this._hasSkippedFirstElements=!1,this._index=-1},Enumerable.prototype.take=function(a){return new TakeEnumerable(this,a)},TakeEnumerable.prototype=Object.create(Enumerable.prototype),TakeEnumerable.prototype.getEnumerator=function(){return new TakeEnumerator(this._source,this._count)},TakeEnumerator.prototype.getCurrent=function(){return this._enumerator.getCurrent()},TakeEnumerator.prototype.moveNext=function(){return this._count++<this._number&&this._enumerator.moveNext()},TakeEnumerator.prototype.reset=function(){this._enumerator.reset(),this._count=0},Enumerable.prototype.takeWhile=function(a){return new TakeWhileEnumerable(this,a)},TakeWhileEnumerable.prototype=Object.create(Enumerable.prototype),TakeWhileEnumerable.prototype.getEnumerator=function(){return new TakeWhileEnumerator(this._source,this._predicate)},TakeWhileEnumerator.prototype.getCurrent=function(){if(this._hasReachedEnd)throw new Error("Tried to call getCurrent() on invalid cursor position.");return this._enumerator.getCurrent()},TakeWhileEnumerator.prototype.moveNext=function(){var a;return this._index++,!!this._enumerator.moveNext()&&(a=this._enumerator.getCurrent(),!!this._predicate.call(a,a,this._index)||(this._hasReachedEnd=!0,!1))},TakeWhileEnumerator.prototype.reset=function(){this._enumerator.reset(),this._index=-1,this._hasReachedEnd=!1},Enumerable.prototype.union=function(a,b){return new UnionEnumerable(this,a,b)},UnionEnumerable.prototype=Object.create(Enumerable.prototype),UnionEnumerable.prototype.getEnumerator=function(){return new UnionEnumerator(this._first,this._second,this._comparer)},UnionEnumerator.prototype.getCurrent=function(){return this._isFirstActive?this._firstEnumerator.getCurrent():this._secondEnumerator.getCurrent()},UnionEnumerator.prototype.moveNext=function(){var a,b,c=!1;if(this._isFirstActive){if(!this._firstEnumerator.moveNext())return this._isFirstActive=!1,this.moveNext();c=!0,a=this._firstEnumerator.getCurrent()}else this._secondEnumerator.moveNext()&&(c=!0,a=this._secondEnumerator.getCurrent());if(c){if(b=this._comparer.getHashCode(a),this._seenElements[b]){for(var d=this._seenElements[b].length-1;d>=0;d--)if(this._comparer.equals(a,this._seenElements[b][d]))return this.moveNext();return this._seenElements[b].push(a),!0}return this._seenElements[b]=[a],!0}return!1},UnionEnumerator.prototype.reset=function(){this._firstEnumerator.reset(),this._secondEnumerator.reset(),this._isFirstActive=!0,this._seenElements={}},Enumerable.prototype.where=function(a){return new WhereEnumerable(this,a)},WhereEnumerable.prototype=Object.create(Enumerable.prototype),WhereEnumerable.prototype.getEnumerator=function(){return new WhereEnumerator(this._source,this._predicate)},WhereEnumerator.prototype.getCurrent=function(){return this._enumerator.getCurrent()},WhereEnumerator.prototype.moveNext=function(){for(var a;this._enumerator.moveNext();)if(a=this._enumerator.getCurrent(),this._predicate.call(a,a,++this._index))return!0;return!1},WhereEnumerator.prototype.reset=function(){this._enumerator.reset(),this._index=-1};var LinqAssert={requiredEnumerable:function(a,b){LinqUtils.isEnumerable(a)||this.throwArgumentError(b)},requiredFunction:function(a,b){LinqUtils.isFunction(a)||this.throwArgumentError(b)},requiredNumber:function(a,b,c){c=c||{},isNaN(a)&&this.throwArgumentError(b),!isNaN(c.min)&&+c.min>+a&&this.throwArgumentOutOfRangeError(b),!isNaN(c.max)&&+c.max<+a&&this.throwArgumentOutOfRangeError(b)},requiredPositiveNumber:function(a,b){this.requiredNumber(a,b,{min:0})},requiredValue:function(a,b){a||this.throwArgumentNullError(b)},throwArgumentError:function(a){throw new Error("Invalid parameter: "+a)},throwArgumentNullError:function(a){throw new Error("Argument was null: "+a)},throwArgumentOutOfRangeError:function(a){throw new Error("Parameter value out of range: "+a)},throwNoMatchingItemError:function(){throw new Error("No item matched the predicate or sequence was empty")},throwMultipleMatchingItemsError:function(){throw new Error("Multiple items in the sequence matched the predicate.")}},LinqUtils={createEnumerable:function(a,b){return this.isEnumerable(a)?a:this.isArray(a)?new List(a):void LinqAssert.throwArgumentError(b)},createEqualityComparer:function(a){function b(a){return 1}return a&&this.isFunction(a.equals)?(a.getHashCode=this.isFunction(a.getHashCode)?a.getHashCode:b,a):{equals:this.isFunction(a)?a:this.defaultEqualityComparer,getHashCode:b}},createSelectorFunction:function(a){return this.isFunction(a)?a:this.defaultSelectorFunction},defaultEqualityComparer:function(a,b){return a===b},defaultSelectorFunction:function(a){return a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isEnumerable:function(a){return a instanceof Enumerable},isFunction:function(a){return"function"==typeof a}};List.prototype=Object.create(Enumerable.prototype),List.prototype.add=function(a){this._array.push(a)},List.prototype.addRange=function(a){a=LinqUtils.createEnumerable(a);for(var b=a.getEnumerator();b.moveNext();)this.add(b.getCurrent())},List.prototype.clear=function(){this._array.length=0},List.prototype.copyTo=function(a,b,c,d){LinqUtils.isArray(a)&&(d=c,c=b,b=a,a=0),c=c||0,d=d||+(1/0),LinqAssert.requiredValue(b),LinqAssert.requiredPositiveNumber(a,"index"),LinqAssert.requiredPositiveNumber(c,"arrayIndex"),LinqAssert.requiredPositiveNumber(d,"count");for(var e=0,f=0,g=0,h=this.getEnumerator();e<a;)h.moveNext(),e++;for(;d>f&&h.moveNext();)b[g]=h.getCurrent(),g++,f++},List.prototype.count=function(a){return a?Enumerable.prototype.count.call(this,a):this._array.length},List.prototype.elementAt=function(a){return this._array[a]},List.prototype.getEnumerator=function(){return new ListEnumerator(this._array)},List.prototype.insert=function(a,b){this._array.splice(a,0,b)},List.prototype.insertRange=function(a,b){LinqAssert.requiredPositiveNumber(a,"index"),b=LinqUtils.createEnumerable(b,"elements");for(var c=[a,0],d=b.getEnumerator();d.moveNext();)c.push(d.getCurrent());Array.prototype.splice.apply(this._array,c)},List.prototype.reverse=function(a,b){if(isNaN(a))this._array.reverse();else{var c=this._array.slice(a,a+b);c.reverse(),c.unshift(c.length),c.unshift(a),Array.prototype.splice.apply(this._array,c)}},ListEnumerator.prototype.getCurrent=function(){return this._array[this._index]},ListEnumerator.prototype.moveNext=function(){return++this._index<this._count},ListEnumerator.prototype.reset=function(){this._index=-1,this._count=this._array.length},Grouping.prototype.addElement=function(a){this._elements.add(a)},Grouping.prototype.getElements=function(){return this._elements},Grouping.prototype.getKey=function(){return this._elements.key},Lookup.prototype._addValueWithKey=function(a,b){var c=this._getGroupingByKey(a);c||(c=new Grouping(a),keyHash=this._keyEqualityComparer.getHashCode(a),this._lookupByHashcodes[keyHash]=this._lookupByHashcodes[keyHash]||[],this._lookupByHashcodes[keyHash].push(c),this._keys.push(a)),c.addElement(b)},Lookup.prototype._getGroupingByKey=function(a){var b=this._keyEqualityComparer.getHashCode(a),c=this._lookupByHashcodes[b];if(c)for(var d=c.length-1;d>=0;d--)if(this._keyEqualityComparer.equals(c[d].getKey(),a))return c[d]},Lookup.prototype._setup=function(a,b,c){for(var d=a.getEnumerator(),e=void 0;d.moveNext();)e=d.getCurrent(),this._addValueWithKey(b(e),c(e))},Lookup.prototype.get=function(a){var b=this._getGroupingByKey(a);return b?b.getElements():Enumerable.empty()},Lookup.prototype.getKeys=function(){return new List(this._keys)};